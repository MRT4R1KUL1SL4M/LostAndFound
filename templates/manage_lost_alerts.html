{% extends "layout.html" %}
{% block title %}Manage My Lost Item Alerts{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto">
    <div class="flex justify-between items-center mb-8">
        <h1 class="text-3xl font-bold text-white">My Lost Item Alerts</h1>
        <a href="{{ url_for('new_lost_alert') }}" class="bg-teal-600 text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-teal-700 shadow-lg flex items-center space-x-2">
            <i class="fa fa-plus"></i>
            <span>Create New Alert</span>
        </a>
    </div>

    <div class="bg-gray-800 shadow-xl rounded-lg border border-gray-700 overflow-x-auto">
        {% if alerts %}
        <table class="min-w-full divide-y divide-gray-700">
            <thead class="bg-gray-700/50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase">Title</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase">Category</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase">Location</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase">Date</th>
                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase">Action</th>
                </tr>
            </thead>
            <tbody class="bg-gray-800 divide-y divide-gray-700">
                {% for alert in alerts %}
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">{{ alert.title }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">{{ alert.category_name }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">{{ alert.location_name or 'N/A' }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ alert.alert_date.strftime('%d %b %Y') }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <form action="{{ url_for('delete_lost_alert', alert_id=alert.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this alert?');">
                            <button type="submit" class="text-red-400 hover:text-red-300">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="text-center py-16">
            <i class="fa fa-bell-slash text-5xl text-gray-600 mb-4"></i>
            <h3 class="text-xl font-semibold text-white">No Active Alerts Found.</h3>
            <p class="text-gray-500 mt-2">Create an alert to get notified when a matching item is found.</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
