{% extends "admin/admin_layout.html" %}
{% block title %}Email Logs{% endblock %}
{% block header_title %}Email Communication Logs{% endblock %}

{% block admin_content %}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-white">Email Communication Logs</h1>
</div>
<div class="bg-gray-800 shadow-xl rounded-lg overflow-x-auto border border-gray-700">
    <table class="min-w-full divide-y divide-gray-700">
        <thead class="bg-gray-700/50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Sender</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Recipient</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Regarding Item</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Message</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Sent At</th>
            </tr>
        </thead>
        <tbody class="bg-gray-800 divide-y divide-gray-700">
            {% for log in logs %}
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-white">{{ log.sender_name }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">{{ log.recipient_email }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">{{ log.item_title }}</td>
                <td class="px-6 py-4 text-sm text-gray-400 max-w-xs truncate" title="{{ log.message }}">{{ log.message }}</td>
                <!-- UPDATED: Using the 'bst' filter for correct time -->
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ log.sent_at | bst }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" class="text-center py-10 text-gray-500">No email logs found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
